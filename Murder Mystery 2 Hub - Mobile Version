-- [ CARREGAMENTO DA UI ]
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Universal Hub | @drayko.exe",
   LoadingTitle = "Iniciando Sistema...",
   LoadingSubtitle = "by drayko",
   Theme = "Ocean" 
})

-- [ SERVIÇOS ]
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- [ VARIÁVEIS DE ESTADO ]
local xrayOriginals = {} 
local state = {
    xray = false,
    aimbot = false,
    admin = false,
    aimRange = 100,
    fireRate = 0.5,
    lastShot = 0
}

-- [ 1. INFINITE JUMP ]
UserInputService.JumpRequest:Connect(function()
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- [ 2. LÓGICA X-RAY ]
local function toggleXray(v)
    state.xray = v
    if state.xray then
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("BasePart") and not obj:IsDescendantOf(player.Character) then
                if not xrayOriginals[obj] then xrayOriginals[obj] = obj.Transparency end
                obj.Transparency = 0.5
            end
        end
    else
        for obj, original in pairs(xrayOriginals) do
            if obj and obj.Parent then obj.Transparency = original end
        end
        xrayOriginals = {}
    end
end

-- [ 3. LÓGICA ADMIN ROLES (MM2 ESP) ]
task.spawn(function()
    while true do
        task.wait(1)
        if state.admin then
            for _, plr in pairs(Players:GetPlayers()) do
                if plr ~= player and plr.Character then
                    local char = plr.Character
                    local color = Color3.fromRGB(0, 255, 0) -- Inocente
                    
                    local hasKnife = char:FindFirstChild("Knife") or plr.Backpack:FindFirstChild("Knife")
                    local hasGun = char:FindFirstChild("Gun") or plr.Backpack:FindFirstChild("Gun") or char:FindFirstChild("Revolver") or plr.Backpack:FindFirstChild("Revolver")

                    if hasKnife then color = Color3.fromRGB(255, 0, 0)
                    elseif hasGun then color = Color3.fromRGB(0, 0, 255) end

                    local highlight = char:FindFirstChild("AdminHighlight") or Instance.new("Highlight")
                    highlight.Name = "AdminHighlight"
                    highlight.FillColor = color
                    highlight.OutlineColor = color
                    highlight.FillTransparency = 0.5
                    highlight.Parent = char
                end
            end
        end
    end
end)

-- [ 4. LÓGICA AIMBOT ]
RunService.RenderStepped:Connect(function()
    if not state.aimbot then return end
    if tick() - state.lastShot < state.fireRate then return end
    
    local target = nil
    local dist = state.aimRange
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")

    if root then
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local d = (root.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                if d < dist then
                    dist = d
                    target = plr.Character.HumanoidRootPart
                end
            end
        end
    end

    if target then
        Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        state.lastShot = tick()
    end
end)

-- [ ABAS DA INTERFACE ]

-- ABA FUNÇÕES
local MainTab = Window:CreateTab("Funções", 4483362458)

MainTab:CreateToggle({
   Name = "Revelar Cargos (Admin Roles)",
   CurrentValue = false,
   Callback = function(v) 
        state.admin = v 
        if not v then
            for _, plr in pairs(Players:GetPlayers()) do
                if plr.Character and plr.Character:FindFirstChild("AdminHighlight") then
                    plr.Character.AdminHighlight:Destroy()
                end
            end
        end
   end,
})

MainTab:CreateToggle({
   Name = "X-Ray Vision",
   CurrentValue = false,
   Callback = function(v) toggleXray(v) end,
})

MainTab:CreateToggle({
   Name = "Aimbot",
   CurrentValue = false,
   Callback = function(v) state.aimbot = v end,
})

-- ABA MM2 HUB (NOVA)
local MM2Tab = Window:CreateTab("MM2 Hub", 4483362458)

MM2Tab:CreateButton({
   Name = "Carregar MM2 Mobile Hub",
   Callback = function()
       loadstring(game:HttpGet("https://raw.githubusercontent.com/drayko-exe/Murder-Mystery-2-Mobile-Version/refs/heads/main/Murder%20Mystery%202%20Hub%20-%20Mobile%20Version"))()
       Rayfield:Notify({
          Title = "MM2 Hub",
          Content = "Script Mobile carregado com sucesso!",
          Duration = 5,
          Image = 4483362458,
       })
   end,
})

-- ABA VISUAL (SHADERS)
local VisualTab = Window:CreateTab("Visual & Shaders", 4483362458)

VisualTab:CreateSection("Opções de Shaders")

VisualTab:CreateButton({
   Name = "Ativar Shaders V6",
   Callback = function()
       loadstring(game:HttpGet("https://raw.githubusercontent.com/drayko-exe/Shaders-v6/refs/heads/main/made%20by%20me"))()
   end,
})

VisualTab:CreateButton({
   Name = "Ativar Shaders By Drayko",
   Callback = function()
       loadstring(game:HttpGet("https://raw.githubusercontent.com/drayko-exe/shaders-by-drayko.exe/refs/heads/main/shaders%20by%20%40drayko.exe"))()
   end,
})

-- ABA MISC
local MiscTab = Window:CreateTab("Misc", 4483362458)

MiscTab:CreateButton({
   Name = "Teleportar p/ Trás (7 Studs)",
   Callback = function()
      local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
      if hrp then hrp.CFrame = hrp.CFrame * CFrame.new(0, 0, 7) end
   end,
})

MiscTab:CreateLabel("Pulo Infinito: ATIVADO")

-- ABA SOCIAL
local SocialTab = Window:CreateTab("Social", 4483362458)
SocialTab:CreateButton({ Name = "Copiar TikTok", Callback = function() setclipboard("@drayko.exe") end })
SocialTab:CreateButton({ Name = "Copiar Discord", Callback = function() setclipboard("https://discord.gg/EqTyzs4S") end })
