local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Murder Mystery 2 Hub | by @drayko.exe",
   LoadingTitle = "Carregando Funções",
   LoadingSubtitle = "made by drayko",
   Theme = "Ocean" 
})

-- [ VARIÁVEIS DE CONTROLE ]
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

local xrayOriginals = {} 
local xrayEnabled = false
local aimbotEnabled = false
local adminEnabled = false
local aimbotRange = 100 
local lastShotTime = 0
local fireRate = 0.5 

-- [ 1. LÓGICA ADMIN ROLES (ESP) ]
local function refreshAdminRoles()
    while task.wait(1) do
        if not adminEnabled then break end
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= player and plr.Character then
                local char = plr.Character
                local color = Color3.fromRGB(0, 255, 0) -- Inocente
                
                local hasKnife = char:FindFirstChild("Knife") or plr.Backpack:FindFirstChild("Knife")
                local hasGun = char:FindFirstChild("Gun") or plr.Backpack:FindFirstChild("Gun") or char:FindFirstChild("Revolver") or plr.Backpack:FindFirstChild("Revolver")

                if hasKnife then
                    color = Color3.fromRGB(255, 0, 0) -- Murder
                elseif hasGun then
                    color = Color3.fromRGB(0, 0, 255) -- Sheriff
                end

                local highlight = char:FindFirstChild("AdminHighlight") or Instance.new("Highlight")
                highlight.Name = "AdminHighlight"
                highlight.FillColor = color
                highlight.FillTransparency = 0.5
                highlight.OutlineColor = color
                highlight.OutlineTransparency = 0
                highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                highlight.Parent = char
            end
        end
    end
end

-- [ 2. LÓGICA X-RAY ]
local function applyXray(state)
    xrayEnabled = state
    if xrayEnabled then
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("BasePart") and not obj:IsDescendantOf(player.Character) then
                if not xrayOriginals[obj] then 
                    xrayOriginals[obj] = obj.Transparency 
                end
                obj.Transparency = 0.5
            end
        end
    else
        for obj, originalValue in pairs(xrayOriginals) do
            if obj and obj.Parent then 
                obj.Transparency = originalValue 
            end
        end
        xrayOriginals = {} 
    end
end

-- [ 3. INFINITE JUMP (SEMPRE ATIVO) ]
UserInputService.JumpRequest:Connect(function()
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- [ 4. LÓGICA AIMBOT ]
RunService.RenderStepped:Connect(function()
    if not aimbotEnabled then return end
    local currentTime = tick()
    if currentTime - lastShotTime < fireRate then return end
    
    local nearestTarget = nil
    local minDistance = aimbotRange
    local myRoot = player.Character and player.Character:FindFirstChild("HumanoidRootPart")

    if myRoot then
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local distance = (myRoot.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                if distance < minDistance then
                    minDistance = distance
                    nearestTarget = plr.Character.HumanoidRootPart
                end
            end
        end
    end

    if nearestTarget then
        Camera.CFrame = CFrame.new(Camera.CFrame.Position, nearestTarget.Position)
        lastShotTime = currentTime
    end
end)

-- [ INTERFACE RAYFIELD ]

local MainTab = Window:CreateTab("Principal", 4483362458)

MainTab:CreateToggle({
   Name = "Admin Roles (Revelar Cargos)",
   CurrentValue = false,
   Callback = function(Value)
      adminEnabled = Value
      if adminEnabled then
          task.spawn(refreshAdminRoles)
      else
          for _, plr in pairs(Players:GetPlayers()) do
              if
